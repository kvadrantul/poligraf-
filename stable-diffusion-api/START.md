# üöÄ –ó–∞–ø—É—Å–∫ Stable Diffusion API (LCM Dreamshaper - –°–ê–ú–ê–Ø –ë–´–°–¢–†–ê–Ø!)

**–ú–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `SimianLuo/LCM_Dreamshaper_v7`
- ‚ö°‚ö°‚ö° **–°–ê–ú–ê–Ø –ë–´–°–¢–†–ê–Ø**: 1-2 —à–∞–≥–∞ (–≤–º–µ—Å—Ç–æ 20-50) - –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è CPU!
- üì¶ **–ú–∞–ª–µ–Ω—å–∫–∏–π —Ä–∞–∑–º–µ—Ä**: ~4GB (–≤–º–µ—Å—Ç–æ ~10GB –¥–ª—è SDXL)
- ‚úÖ **–ö–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–æ** (CreativeML Open RAIL-M)
- üîì **–û—Ç–∫—Ä—ã—Ç–∞—è –º–æ–¥–µ–ª—å** (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω–∞)
- üéØ **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è CPU** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ —á–µ–º SDXL –Ω–∞ CPU

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, –µ—Å–ª–∏ –µ—Å—Ç—å GPU)

```bash
cd stable-diffusion-api

# –ó–∞–ø—É—Å–∫ —Å GPU
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker-compose logs -f

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
curl http://localhost:7861/health
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–æ (Python)

```bash
cd stable-diffusion-api

# –°–æ–∑–¥–∞–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
python3 -m venv venv
source venv/bin/activate  # –ù–∞ Windows: venv\Scripts\activate

# –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
python main.py
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏** –∑–∞–π–º–µ—Ç 5-10 –º–∏–Ω—É—Ç –∏ ~4GB –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ (–Ω–∞–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ —á–µ–º SDXL!)
2. **CPU —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ** - –Ω–∞ CPU –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–Ω–∏–º–∞–µ—Ç 30-90 —Å–µ–∫—É–Ω–¥ (1-2 —à–∞–≥–∞ –≤–º–µ—Å—Ç–æ 4-50!)
3. **–ú–æ–¥–µ–ª—å –∫–µ—à–∏—Ä—É–µ—Ç—Å—è** –≤ `~/.cache/huggingface` –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# Health check
curl http://localhost:7861/health

# –¢–µ—Å—Ç–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–∑–∞–Ω–∏–º–∞–µ—Ç 30-90 —Å–µ–∫—É–Ω–¥ –Ω–∞ CPU!)
curl -X POST http://localhost:7861/generate \
  -H "Content-Type: application/json" \
  -d '{
    "prompt": "–∫—Ä–∞—Å–∏–≤–∞—è –≤–∏–∑–∏—Ç–∫–∞ —Å –∑–æ–ª–æ—Ç—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏",
    "width": 512,
    "height": 512,
    "num_inference_steps": 2
  }'
```

## üìù –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤ Go backend

Go backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `http://localhost:7861` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

–î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è URL —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
export STABLE_DIFFUSION_API_URL=http://localhost:7861
```

## üêõ Troubleshooting

**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ (–Ω—É–∂–Ω–æ ~4GB –¥–ª—è LCM, ~10GB –¥–ª—è SDXL)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (–º–æ–¥–µ–ª—å —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è —Å Hugging Face)

**–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∞ CUDA/GPU
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –¥—Ä–∞–π–≤–µ—Ä—ã NVIDIA
- –î–ª—è CPU —Ä–µ–∂–∏–º–∞ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `torch` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –±–µ–∑ CUDA

**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ GPU –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è
- –£–º–µ–Ω—å—à–∏—Ç–µ `num_inference_steps` (–Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ –º–æ–∂–µ—Ç —Å–Ω–∏–∑–∏—Ç—å—Å—è)

