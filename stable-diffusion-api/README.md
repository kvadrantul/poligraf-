# Stable Diffusion 3.5 Medium API

–õ–æ–∫–∞–ª—å–Ω—ã–π API —Å–µ—Ä–≤–µ—Ä –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Stable Diffusion 3.5 Medium.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ó–∞–ø—É—Å–∫ —Å GPU –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π (—Ç—Ä–µ–±—É–µ—Ç—Å—è NVIDIA Docker)
docker-compose up -d

# –ò–ª–∏ –±–µ–∑ GPU (CPU —Ä–µ–∂–∏–º, –º–µ–¥–ª–µ–Ω–Ω–µ–µ)
docker-compose up -d --build
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–æ (Python)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
python main.py
```

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **GPU (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**: NVIDIA GPU —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π CUDA –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **RAM**: –ú–∏–Ω–∏–º—É–º 16GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 32GB+)
- **–î–∏—Å–∫**: ~20GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –¥–ª—è –º–æ–¥–µ–ª–∏

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É `7861`.

–ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—Ç:
```bash
export PORT=7861
python main.py
```

## üì° API Endpoints

### `GET /health`
–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–∞

### `POST /generate`
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

**Request:**
```json
{
  "prompt": "–∫—Ä–∞—Å–∏–≤–∞—è –≤–∏–∑–∏—Ç–∫–∞ —Å –∑–æ–ª–æ—Ç—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏",
  "reference_image": "data:image/png;base64,...",  // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
  "num_inference_steps": 28,
  "guidance_scale": 7.0,
  "width": 1024,
  "height": 1024
}
```

**Response:**
```json
{
  "imageUrl": "data:image/png;base64,..."
}
```

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
curl http://localhost:7861/health

# –¢–µ—Å—Ç–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
curl -X POST http://localhost:7861/generate \
  -H "Content-Type: application/json" \
  -d '{"prompt": "test image"}'
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 10-20 –º–∏–Ω—É—Ç
- –ú–æ–¥–µ–ª—å –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –≤ `~/.cache/huggingface`
- –î–ª—è GPU —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π NVIDIA Docker runtime


